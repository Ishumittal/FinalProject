{"version":3,"file":"aposin-ng-aquila-swipebar.mjs","sources":["../../../projects/ng-aquila/src/swipebar/swipebar.component.ts","../../../projects/ng-aquila/src/swipebar/swipebar.component.html","../../../projects/ng-aquila/src/swipebar/swipebar.module.ts","../../../projects/ng-aquila/src/swipebar/aposin-ng-aquila-swipebar.ts"],"sourcesContent":["import { AfterViewInit, ChangeDetectionStrategy, Component, ElementRef, HostListener, Input, NgZone, ViewChild } from '@angular/core';\n\n@Component({\n    selector: 'nx-swipebar',\n    templateUrl: 'swipebar.component.html',\n    styleUrls: ['swipebar.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class NxSwipebarComponent implements AfterViewInit {\n    @ViewChild('element')\n    private _element!: ElementRef;\n\n    @ViewChild('scrollable')\n    private _scrollable!: ElementRef;\n\n    @ViewChild('indicator')\n    private _indicator!: ElementRef;\n\n    private _barLength = 0;\n\n    private _position = 0;\n\n    private _startX = 0;\n\n    private _mousedown = false;\n\n    private _showBar = false;\n\n    /**\n     * The label for this swipebar. Default: ''\n     */\n    @Input()\n    label = '';\n\n    constructor(private zone: NgZone) {\n        this._onMousedown = this._onMousedown.bind(this);\n        this._onMousemove = this._onMousemove.bind(this);\n        this._onMouseup = this._onMouseup.bind(this);\n        this._onScroll = this._onScroll.bind(this);\n    }\n\n    ngAfterViewInit() {\n        this._onResize();\n\n        // Run outside zone to not trigger change detection when scrolling.\n        this.zone.runOutsideAngular(() => {\n            this._scrollable.nativeElement.addEventListener('scroll', this._onScroll);\n            this._indicator.nativeElement.addEventListener('mousedown', this._onMousedown);\n        });\n    }\n\n    @HostListener('window:resize')\n    _onResize() {\n        if (!this._scrollable) {\n            return;\n        }\n\n        const { scrollWidth, offsetWidth } = this._scrollable.nativeElement;\n        this._showBar = scrollWidth > offsetWidth;\n        this._barLength = Math.max(80, (offsetWidth / scrollWidth) * offsetWidth);\n        this._updateIndicator();\n    }\n\n    private _onScroll($event: Event) {\n        if (this._mousedown) {\n            return;\n        }\n\n        const target: HTMLElement = $event.target as HTMLElement;\n        const { scrollWidth, clientWidth } = this._scrollable.nativeElement;\n        this._position = Math.floor((target.scrollLeft / (scrollWidth - clientWidth)) * (target.offsetWidth - this._barLength));\n        this._updateIndicator();\n    }\n\n    private _onMousedown($event: MouseEvent) {\n        this._startX = $event.clientX;\n        this._mousedown = true;\n\n        document.addEventListener('mousemove', this._onMousemove);\n        document.addEventListener('mouseup', this._onMouseup);\n    }\n\n    private _onMousemove($event: MouseEvent) {\n        const { offsetWidth } = this._scrollable.nativeElement;\n\n        this._position = Math.max(0, Math.min(offsetWidth - this._barLength, this._position + $event.clientX - this._startX));\n        this._startX = $event.clientX;\n\n        this._updateScrollablePosition();\n        this._updateIndicator();\n    }\n\n    private _onMouseup() {\n        document.removeEventListener('mousemove', this._onMousemove);\n        document.removeEventListener('mouseup', this._onMouseup);\n        this._mousedown = false;\n    }\n\n    private _updateScrollablePosition() {\n        requestAnimationFrame(() => {\n            const { scrollWidth, clientWidth, offsetWidth } = this._scrollable.nativeElement;\n            this._scrollable.nativeElement.scrollLeft = (this._position / (offsetWidth - this._barLength)) * (scrollWidth - clientWidth);\n        });\n    }\n\n    private _updateIndicator() {\n        requestAnimationFrame(() => {\n            this._element.nativeElement.style.display = this._showBar ? 'block' : 'none';\n            this._indicator.nativeElement.style.transform = `translateX(${this._position}px)`;\n            this._indicator.nativeElement.style.width = `${this._barLength}px`;\n        });\n    }\n}\n","<div aria-hidden=\"true\" #element>\n    <div class=\"label\" nxCopytext *ngIf=\"label\">{{ label }}</div>\n    <div class=\"bar\">\n        <div class=\"indicator\" #indicator></div>\n    </div>\n</div>\n<div class=\"scrollable\" #scrollable>\n    <ng-content></ng-content>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NxCopytextModule } from '@aposin/ng-aquila/copytext';\n\nimport { NxSwipebarComponent } from './swipebar.component';\n\n@NgModule({\n    declarations: [NxSwipebarComponent],\n    exports: [NxSwipebarComponent],\n    imports: [CommonModule, NxCopytextModule],\n})\nexport class NxSwipebarModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}