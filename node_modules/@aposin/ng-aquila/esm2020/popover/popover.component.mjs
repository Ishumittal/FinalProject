import { ENTER, SPACE } from '@angular/cdk/keycodes';
import { ChangeDetectionStrategy, Component, ContentChild, EventEmitter, Output, TemplateRef, ViewChild, } from '@angular/core';
import { Subject } from 'rxjs';
import { takeUntil } from 'rxjs/operators';
import { NxPopoverContentDirective } from './popover-content';
import * as i0 from "@angular/core";
import * as i1 from "./popover-intl";
import * as i2 from "@aposin/ng-aquila/icon";
import * as i3 from "@angular/common";
export class NxPopoverComponent {
    constructor(_intl, _cdr) {
        this._intl = _intl;
        this._cdr = _cdr;
        /** Event emitted when the popover is closed. */
        this.closed = new EventEmitter();
        /** @docs-private */
        this.closeButtonClick = new Subject();
        /** @docs-private */
        this.showCloseButton = false;
        /** @docs-private */
        this.arrowStyle = {};
        this._destroyed = new Subject();
    }
    ngOnInit() {
        this._intl.changes.pipe(takeUntil(this._destroyed)).subscribe(() => {
            this._cdr.markForCheck();
        });
    }
    ngOnDestroy() {
        this._destroyed.next();
        this._destroyed.complete();
        this.closed.complete();
    }
    /**
     * Emits event to notify the popover trigger directive that the close button was clicked.
     * @docs-private
     */
    emitCloseButtonClick() {
        this.closeButtonClick.next();
    }
    /** @docs-private */
    _onCloseKeyup($event) {
        if ($event && ($event.keyCode === ENTER || $event.keyCode === SPACE)) {
            this.emitCloseButtonClick();
        }
        $event.preventDefault();
    }
    /** @docs-private */
    emitClosedEvent() {
        this.closed.emit();
    }
    /** @docs-private */
    get classList() {
        if (this.direction) {
            // Returning an array here caused an error that the classes were not set
            // after a prod build. Couldn't reproduce it properly in an isolated way.
            // As it doesn't make sense to return an array for a single value anyway
            // changed it to a string and that seems to work.
            return `nx-popover--${this.direction}`;
        }
        return '';
    }
    /** Prevent the popover from closing when the user clicks on the popover content. */
    _onClick(event) {
        event.stopPropagation();
    }
}
NxPopoverComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.1", ngImport: i0, type: NxPopoverComponent, deps: [{ token: i1.NxPopoverIntl }, { token: i0.ChangeDetectorRef }], target: i0.ɵɵFactoryTarget.Component });
NxPopoverComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.3.1", type: NxPopoverComponent, selector: "nx-popover", outputs: { closed: "nxClosed" }, queries: [{ propertyName: "_lazyContent", first: true, predicate: NxPopoverContentDirective, descendants: true }], viewQueries: [{ propertyName: "templateRef", first: true, predicate: TemplateRef, descendants: true }], exportAs: ["nxPopover"], ngImport: i0, template: "<ng-template>\n    <div [ngClass]=\"classList\" class=\"nx-popover\" role=\"tooltip\" aria-hidden=\"false\" (click)=\"_onClick($event)\">\n        <div class=\"nx-popover__content\" tabindex=\"0\">\n            <div class=\"nx-popover__arrow\" [ngStyle]=\"arrowStyle\"></div>\n            <span\n                [attr.aria-label]=\"_intl.closeIconLabel\"\n                tabindex=\"0\"\n                role=\"button\"\n                class=\"nx-popover__close-icon\"\n                (click)=\"emitCloseButtonClick()\"\n                (keyup)=\"_onCloseKeyup($event)\"\n                *ngIf=\"showCloseButton\"\n            >\n                <nx-icon aria-hidden=\"true\" name=\"close\"></nx-icon>\n            </span>\n\n            <span [id]=\"id\">\n                <ng-content></ng-content>\n                <ng-container [ngTemplateOutlet]=\"_lazyContent?._template ?? null\"></ng-container>\n            </span>\n        </div>\n    </div>\n</ng-template>\n", styles: [".nx-popover__content{font-size:var(--popover-content-font-size);line-height:var(--popover-content-line-height);font-weight:var(--popover-content-font-weight);letter-spacing:var(--popover-content-letter-spacing);background-color:var(--popover-background-color);color:var(--popover-text-color);border:1px solid var(--popover-border-color);border-radius:4px;box-shadow:var(--shadow-small);padding:23px;display:block}.nx-popover__content:focus{outline:none}.nx-popover__content::-moz-focus-inner{border:0}.nx-popover__close-icon{display:flex;position:absolute;top:4px;right:4px;cursor:pointer;font-size:var(--popover-close-icon-size);color:var(--popover-close-icon-color);border-radius:2px}[dir=rtl] .nx-popover__close-icon{right:auto;left:4px}.nx-popover__close-icon:focus{outline:none}.nx-popover__close-icon::-moz-focus-inner{border:0}@media screen and (-ms-high-contrast: active){.nx-popover__close-icon{color:buttonText}}.nx-popover__content.cdk-keyboard-focused,.nx-popover__close-icon.cdk-keyboard-focused{box-shadow:var(--focus-box-shadow)}@media screen and (-ms-high-contrast: active),(forced-colors: active){.nx-popover__content.cdk-keyboard-focused,.nx-popover__close-icon.cdk-keyboard-focused{box-shadow:0 0 0 2px background,0 0 0 6px windowText;outline:4px solid CanvasText;outline-offset:2px}}.nx-popover__arrow{width:12px;height:12px;background-color:inherit;position:absolute;transform:translate(-50%);border-top:1px solid var(--popover-border-color);border-left:1px solid var(--popover-border-color)}.nx-popover--top .nx-popover__arrow{transform:translate(-50%) rotate(225deg);bottom:-5px;box-shadow:2px 2px 1px 1px var(--popover-background-color),-2px -2px -4px var(--shadow-small-color)}.nx-popover--right .nx-popover__arrow{transform:translateY(-50%) rotate(-45deg);left:-5px}.nx-popover--bottom .nx-popover__arrow{transform:translate(-50%) rotate(45deg);top:-5px}.nx-popover--left .nx-popover__arrow{transform:translateY(-50%) rotate(135deg);right:-5px}\n"], components: [{ type: i2.NxIconComponent, selector: "nx-icon", inputs: ["name", "outline", "fill", "size", "font"] }], directives: [{ type: i3.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i3.NgStyle, selector: "[ngStyle]", inputs: ["ngStyle"] }, { type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i3.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.1", ngImport: i0, type: NxPopoverComponent, decorators: [{
            type: Component,
            args: [{ selector: 'nx-popover', changeDetection: ChangeDetectionStrategy.OnPush, exportAs: 'nxPopover', template: "<ng-template>\n    <div [ngClass]=\"classList\" class=\"nx-popover\" role=\"tooltip\" aria-hidden=\"false\" (click)=\"_onClick($event)\">\n        <div class=\"nx-popover__content\" tabindex=\"0\">\n            <div class=\"nx-popover__arrow\" [ngStyle]=\"arrowStyle\"></div>\n            <span\n                [attr.aria-label]=\"_intl.closeIconLabel\"\n                tabindex=\"0\"\n                role=\"button\"\n                class=\"nx-popover__close-icon\"\n                (click)=\"emitCloseButtonClick()\"\n                (keyup)=\"_onCloseKeyup($event)\"\n                *ngIf=\"showCloseButton\"\n            >\n                <nx-icon aria-hidden=\"true\" name=\"close\"></nx-icon>\n            </span>\n\n            <span [id]=\"id\">\n                <ng-content></ng-content>\n                <ng-container [ngTemplateOutlet]=\"_lazyContent?._template ?? null\"></ng-container>\n            </span>\n        </div>\n    </div>\n</ng-template>\n", styles: [".nx-popover__content{font-size:var(--popover-content-font-size);line-height:var(--popover-content-line-height);font-weight:var(--popover-content-font-weight);letter-spacing:var(--popover-content-letter-spacing);background-color:var(--popover-background-color);color:var(--popover-text-color);border:1px solid var(--popover-border-color);border-radius:4px;box-shadow:var(--shadow-small);padding:23px;display:block}.nx-popover__content:focus{outline:none}.nx-popover__content::-moz-focus-inner{border:0}.nx-popover__close-icon{display:flex;position:absolute;top:4px;right:4px;cursor:pointer;font-size:var(--popover-close-icon-size);color:var(--popover-close-icon-color);border-radius:2px}[dir=rtl] .nx-popover__close-icon{right:auto;left:4px}.nx-popover__close-icon:focus{outline:none}.nx-popover__close-icon::-moz-focus-inner{border:0}@media screen and (-ms-high-contrast: active){.nx-popover__close-icon{color:buttonText}}.nx-popover__content.cdk-keyboard-focused,.nx-popover__close-icon.cdk-keyboard-focused{box-shadow:var(--focus-box-shadow)}@media screen and (-ms-high-contrast: active),(forced-colors: active){.nx-popover__content.cdk-keyboard-focused,.nx-popover__close-icon.cdk-keyboard-focused{box-shadow:0 0 0 2px background,0 0 0 6px windowText;outline:4px solid CanvasText;outline-offset:2px}}.nx-popover__arrow{width:12px;height:12px;background-color:inherit;position:absolute;transform:translate(-50%);border-top:1px solid var(--popover-border-color);border-left:1px solid var(--popover-border-color)}.nx-popover--top .nx-popover__arrow{transform:translate(-50%) rotate(225deg);bottom:-5px;box-shadow:2px 2px 1px 1px var(--popover-background-color),-2px -2px -4px var(--shadow-small-color)}.nx-popover--right .nx-popover__arrow{transform:translateY(-50%) rotate(-45deg);left:-5px}.nx-popover--bottom .nx-popover__arrow{transform:translate(-50%) rotate(45deg);top:-5px}.nx-popover--left .nx-popover__arrow{transform:translateY(-50%) rotate(135deg);right:-5px}\n"] }]
        }], ctorParameters: function () { return [{ type: i1.NxPopoverIntl }, { type: i0.ChangeDetectorRef }]; }, propDecorators: { templateRef: [{
                type: ViewChild,
                args: [TemplateRef]
            }], _lazyContent: [{
                type: ContentChild,
                args: [NxPopoverContentDirective]
            }], closed: [{
                type: Output,
                args: ['nxClosed']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9wb3Zlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZy1hcXVpbGEvc3JjL3BvcG92ZXIvcG9wb3Zlci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZy1hcXVpbGEvc3JjL3BvcG92ZXIvcG9wb3Zlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3JELE9BQU8sRUFDSCx1QkFBdUIsRUFFdkIsU0FBUyxFQUNULFlBQVksRUFDWixZQUFZLEVBR1osTUFBTSxFQUNOLFdBQVcsRUFDWCxTQUFTLEdBQ1osTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFM0MsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sbUJBQW1CLENBQUM7Ozs7O0FBVTlELE1BQU0sT0FBTyxrQkFBa0I7SUE2QjNCLFlBQW1CLEtBQW9CLEVBQVUsSUFBdUI7UUFBckQsVUFBSyxHQUFMLEtBQUssQ0FBZTtRQUFVLFNBQUksR0FBSixJQUFJLENBQW1CO1FBckJ4RSxnREFBZ0Q7UUFFaEQsV0FBTSxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7UUFFbEMsb0JBQW9CO1FBQ3BCLHFCQUFnQixHQUFHLElBQUksT0FBTyxFQUFRLENBQUM7UUFRdkMsb0JBQW9CO1FBQ3BCLG9CQUFlLEdBQUcsS0FBSyxDQUFDO1FBRXhCLG9CQUFvQjtRQUNwQixlQUFVLEdBQUcsRUFBRSxDQUFDO1FBRUMsZUFBVSxHQUFHLElBQUksT0FBTyxFQUFRLENBQUM7SUFFeUIsQ0FBQztJQUU1RSxRQUFRO1FBQ0osSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsR0FBRyxFQUFFO1lBQy9ELElBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0lBRUQsV0FBVztRQUNQLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUMzQixJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBQzNCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxvQkFBb0I7UUFDaEIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxDQUFDO0lBQ2pDLENBQUM7SUFFRCxvQkFBb0I7SUFDcEIsYUFBYSxDQUFDLE1BQXFCO1FBQy9CLElBQUksTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sS0FBSyxLQUFLLElBQUksTUFBTSxDQUFDLE9BQU8sS0FBSyxLQUFLLENBQUMsRUFBRTtZQUNsRSxJQUFJLENBQUMsb0JBQW9CLEVBQUUsQ0FBQztTQUMvQjtRQUNELE1BQU0sQ0FBQyxjQUFjLEVBQUUsQ0FBQztJQUM1QixDQUFDO0lBRUQsb0JBQW9CO0lBQ3BCLGVBQWU7UUFDWCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxvQkFBb0I7SUFDcEIsSUFBSSxTQUFTO1FBQ1QsSUFBSSxJQUFJLENBQUMsU0FBUyxFQUFFO1lBQ2hCLHdFQUF3RTtZQUN4RSx5RUFBeUU7WUFDekUsd0VBQXdFO1lBQ3hFLGlEQUFpRDtZQUNqRCxPQUFPLGVBQWUsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO1NBQzFDO1FBQ0QsT0FBTyxFQUFFLENBQUM7SUFDZCxDQUFDO0lBRUQsb0ZBQW9GO0lBQ3BGLFFBQVEsQ0FBQyxLQUFZO1FBQ2pCLEtBQUssQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUM1QixDQUFDOzsrR0EvRVEsa0JBQWtCO21HQUFsQixrQkFBa0IsNkhBTWIseUJBQXlCLDZGQUo1QixXQUFXLHlFQzVCMUIsNDhCQXVCQTsyRkRHYSxrQkFBa0I7a0JBUDlCLFNBQVM7K0JBQ0ksWUFBWSxtQkFFTCx1QkFBdUIsQ0FBQyxNQUFNLFlBRXJDLFdBQVc7b0lBS3JCLFdBQVc7c0JBRFYsU0FBUzt1QkFBQyxXQUFXO2dCQUltQixZQUFZO3NCQUFwRCxZQUFZO3VCQUFDLHlCQUF5QjtnQkFJdkMsTUFBTTtzQkFETCxNQUFNO3VCQUFDLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFTlRFUiwgU1BBQ0UgfSBmcm9tICdAYW5ndWxhci9jZGsva2V5Y29kZXMnO1xuaW1wb3J0IHtcbiAgICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcbiAgICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgICBDb21wb25lbnQsXG4gICAgQ29udGVudENoaWxkLFxuICAgIEV2ZW50RW1pdHRlcixcbiAgICBPbkRlc3Ryb3ksXG4gICAgT25Jbml0LFxuICAgIE91dHB1dCxcbiAgICBUZW1wbGF0ZVJlZixcbiAgICBWaWV3Q2hpbGQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgdGFrZVVudGlsIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5pbXBvcnQgeyBOeFBvcG92ZXJDb250ZW50RGlyZWN0aXZlIH0gZnJvbSAnLi9wb3BvdmVyLWNvbnRlbnQnO1xuaW1wb3J0IHsgTnhQb3BvdmVySW50bCB9IGZyb20gJy4vcG9wb3Zlci1pbnRsJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdueC1wb3BvdmVyJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vcG9wb3Zlci5jb21wb25lbnQuaHRtbCcsXG4gICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgc3R5bGVVcmxzOiBbJy4vcG9wb3Zlci5jb21wb25lbnQuc2NzcyddLFxuICAgIGV4cG9ydEFzOiAnbnhQb3BvdmVyJyxcbn0pXG5leHBvcnQgY2xhc3MgTnhQb3BvdmVyQ29tcG9uZW50IGltcGxlbWVudHMgT25EZXN0cm95LCBPbkluaXQge1xuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgQFZpZXdDaGlsZChUZW1wbGF0ZVJlZilcbiAgICB0ZW1wbGF0ZVJlZiE6IFRlbXBsYXRlUmVmPGFueT47XG5cbiAgICAvKiogQ29udGVudCB0aGF0IHdpbGwgYmUgcmVuZGVyZWQgbGF6aWx5LiAqL1xuICAgIEBDb250ZW50Q2hpbGQoTnhQb3BvdmVyQ29udGVudERpcmVjdGl2ZSkgX2xhenlDb250ZW50ITogTnhQb3BvdmVyQ29udGVudERpcmVjdGl2ZTtcblxuICAgIC8qKiBFdmVudCBlbWl0dGVkIHdoZW4gdGhlIHBvcG92ZXIgaXMgY2xvc2VkLiAqL1xuICAgIEBPdXRwdXQoJ254Q2xvc2VkJylcbiAgICBjbG9zZWQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG5cbiAgICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICAgIGNsb3NlQnV0dG9uQ2xpY2sgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXG4gICAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgICBpZCE6IHN0cmluZztcblxuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgZGlyZWN0aW9uITogc3RyaW5nO1xuXG4gICAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgICBzaG93Q2xvc2VCdXR0b24gPSBmYWxzZTtcblxuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgYXJyb3dTdHlsZSA9IHt9O1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBfZGVzdHJveWVkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcblxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBfaW50bDogTnhQb3BvdmVySW50bCwgcHJpdmF0ZSBfY2RyOiBDaGFuZ2VEZXRlY3RvclJlZikge31cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLl9pbnRsLmNoYW5nZXMucGlwZSh0YWtlVW50aWwodGhpcy5fZGVzdHJveWVkKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2Nkci5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX2Rlc3Ryb3llZC5uZXh0KCk7XG4gICAgICAgIHRoaXMuX2Rlc3Ryb3llZC5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLmNsb3NlZC5jb21wbGV0ZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVtaXRzIGV2ZW50IHRvIG5vdGlmeSB0aGUgcG9wb3ZlciB0cmlnZ2VyIGRpcmVjdGl2ZSB0aGF0IHRoZSBjbG9zZSBidXR0b24gd2FzIGNsaWNrZWQuXG4gICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAqL1xuICAgIGVtaXRDbG9zZUJ1dHRvbkNsaWNrKCkge1xuICAgICAgICB0aGlzLmNsb3NlQnV0dG9uQ2xpY2submV4dCgpO1xuICAgIH1cblxuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgX29uQ2xvc2VLZXl1cCgkZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgaWYgKCRldmVudCAmJiAoJGV2ZW50LmtleUNvZGUgPT09IEVOVEVSIHx8ICRldmVudC5rZXlDb2RlID09PSBTUEFDRSkpIHtcbiAgICAgICAgICAgIHRoaXMuZW1pdENsb3NlQnV0dG9uQ2xpY2soKTtcbiAgICAgICAgfVxuICAgICAgICAkZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICAgIGVtaXRDbG9zZWRFdmVudCgpIHtcbiAgICAgICAgdGhpcy5jbG9zZWQuZW1pdCgpO1xuICAgIH1cblxuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgZ2V0IGNsYXNzTGlzdCgpOiBzdHJpbmcge1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIC8vIFJldHVybmluZyBhbiBhcnJheSBoZXJlIGNhdXNlZCBhbiBlcnJvciB0aGF0IHRoZSBjbGFzc2VzIHdlcmUgbm90IHNldFxuICAgICAgICAgICAgLy8gYWZ0ZXIgYSBwcm9kIGJ1aWxkLiBDb3VsZG4ndCByZXByb2R1Y2UgaXQgcHJvcGVybHkgaW4gYW4gaXNvbGF0ZWQgd2F5LlxuICAgICAgICAgICAgLy8gQXMgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIHJldHVybiBhbiBhcnJheSBmb3IgYSBzaW5nbGUgdmFsdWUgYW55d2F5XG4gICAgICAgICAgICAvLyBjaGFuZ2VkIGl0IHRvIGEgc3RyaW5nIGFuZCB0aGF0IHNlZW1zIHRvIHdvcmsuXG4gICAgICAgICAgICByZXR1cm4gYG54LXBvcG92ZXItLSR7dGhpcy5kaXJlY3Rpb259YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLyoqIFByZXZlbnQgdGhlIHBvcG92ZXIgZnJvbSBjbG9zaW5nIHdoZW4gdGhlIHVzZXIgY2xpY2tzIG9uIHRoZSBwb3BvdmVyIGNvbnRlbnQuICovXG4gICAgX29uQ2xpY2soZXZlbnQ6IEV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbn1cbiIsIjxuZy10ZW1wbGF0ZT5cbiAgICA8ZGl2IFtuZ0NsYXNzXT1cImNsYXNzTGlzdFwiIGNsYXNzPVwibngtcG9wb3ZlclwiIHJvbGU9XCJ0b29sdGlwXCIgYXJpYS1oaWRkZW49XCJmYWxzZVwiIChjbGljayk9XCJfb25DbGljaygkZXZlbnQpXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJueC1wb3BvdmVyX19jb250ZW50XCIgdGFiaW5kZXg9XCIwXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibngtcG9wb3Zlcl9fYXJyb3dcIiBbbmdTdHlsZV09XCJhcnJvd1N0eWxlXCI+PC9kaXY+XG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiX2ludGwuY2xvc2VJY29uTGFiZWxcIlxuICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiMFwiXG4gICAgICAgICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgICAgICAgY2xhc3M9XCJueC1wb3BvdmVyX19jbG9zZS1pY29uXCJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwiZW1pdENsb3NlQnV0dG9uQ2xpY2soKVwiXG4gICAgICAgICAgICAgICAgKGtleXVwKT1cIl9vbkNsb3NlS2V5dXAoJGV2ZW50KVwiXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJzaG93Q2xvc2VCdXR0b25cIlxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxueC1pY29uIGFyaWEtaGlkZGVuPVwidHJ1ZVwiIG5hbWU9XCJjbG9zZVwiPjwvbngtaWNvbj5cbiAgICAgICAgICAgIDwvc3Bhbj5cblxuICAgICAgICAgICAgPHNwYW4gW2lkXT1cImlkXCI+XG4gICAgICAgICAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgW25nVGVtcGxhdGVPdXRsZXRdPVwiX2xhenlDb250ZW50Py5fdGVtcGxhdGUgPz8gbnVsbFwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbjwvbmctdGVtcGxhdGU+XG4iXX0=