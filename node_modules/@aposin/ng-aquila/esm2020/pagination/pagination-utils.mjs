import { Injectable } from '@angular/core';
import * as i0 from "@angular/core";
/** @docs-private */
export class NxPaginationUtils {
    constructor() {
        this._pagesMobile = 3;
        this._elipsisText = '...';
        this._classExpanded = 'expanded-view';
    }
    getPages(currentPage, totalPages) {
        let pages = [];
        let start = [], middle = [], end = [];
        // First array -> start
        start = this.getStartArray(currentPage, totalPages);
        // Second array -> middle
        middle = this.getMiddleArray(currentPage, totalPages);
        // Third array -> end
        end = this.getEndArray(currentPage, totalPages);
        pages = [...start, ...middle, ...end];
        return pages;
    }
    getMiddleArray(currentPage, totalPages) {
        let pageNumber = currentPage < 6 ? 4 : currentPage - 1;
        const middle = [];
        while (middle.length < 3 && pageNumber >= 2 && pageNumber <= totalPages - 3 && pageNumber <= currentPage + 1 && pageNumber >= currentPage - 1) {
            middle.push(this.createPaginationItem(pageNumber, pageNumber));
            pageNumber++;
        }
        return middle;
    }
    getEndArray(currentPage, totalPages) {
        const end = [];
        let currentItemToShow = totalPages <= 3 ? totalPages + 1 : totalPages <= 6 ? totalPages - (totalPages - 4) : totalPages - 2;
        const showEllipsis = currentPage < totalPages - 4;
        while (currentItemToShow <= totalPages) {
            const endItem = end.length === 0 && showEllipsis
                ? this.createPaginationItem(this._elipsisText, currentItemToShow, true)
                : this.createPaginationItem(currentItemToShow, currentItemToShow, true);
            end.push(endItem);
            currentItemToShow++;
        }
        return end;
    }
    getStartArray(currentPage, totalPages) {
        let counterPages = 0;
        const start = [];
        const maxSizeArray = 3;
        while (counterPages < maxSizeArray && counterPages < totalPages) {
            const startItem = counterPages === 2 && currentPage > 5
                ? this.createPaginationItem(this._elipsisText, counterPages, true)
                : this.createPaginationItem(counterPages + 1, counterPages + 1, true);
            start.push(startItem);
            counterPages++;
        }
        return start;
    }
    getMobilePages(currentPage, totalPages) {
        // if we have less pages than the number we want to display take all
        if (totalPages < this._pagesMobile) {
            return Array.from(Array(totalPages).keys()).map(item => this.createPaginationItem(item + 1, item + 1));
        }
        switch (currentPage) {
            // first page active
            case 1:
                return [1, 2, 3].map(item => this.createPaginationItem(item, item));
            // last page active
            case totalPages:
                return [totalPages - 2, totalPages - 1, totalPages].map(item => this.createPaginationItem(item, item));
            // any other page active
            default:
                return [currentPage - 1, currentPage, currentPage + 1].map(item => this.createPaginationItem(item, item));
        }
    }
    createPaginationItem(label, value, classExpanded) {
        return { label, value, class: classExpanded ? this._classExpanded : '' };
    }
}
NxPaginationUtils.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.1", ngImport: i0, type: NxPaginationUtils, deps: [], target: i0.ɵɵFactoryTarget.Injectable });
NxPaginationUtils.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "13.3.1", ngImport: i0, type: NxPaginationUtils });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.1", ngImport: i0, type: NxPaginationUtils, decorators: [{
            type: Injectable
        }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnaW5hdGlvbi11dGlscy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3Byb2plY3RzL25nLWFxdWlsYS9zcmMvcGFnaW5hdGlvbi9wYWdpbmF0aW9uLXV0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7O0FBVTNDLG9CQUFvQjtBQUVwQixNQUFNLE9BQU8saUJBQWlCO0lBRDlCO1FBRVksaUJBQVksR0FBRyxDQUFDLENBQUM7UUFDakIsaUJBQVksR0FBRyxLQUFLLENBQUM7UUFDckIsbUJBQWMsR0FBRyxlQUFlLENBQUM7S0FzRjVDO0lBcEZHLFFBQVEsQ0FBQyxXQUFtQixFQUFFLFVBQWtCO1FBQzVDLElBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNmLElBQUksS0FBSyxHQUFHLEVBQUUsRUFDVixNQUFNLEdBQUcsRUFBRSxFQUNYLEdBQUcsR0FBRyxFQUFFLENBQUM7UUFFYix1QkFBdUI7UUFDdkIsS0FBSyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsV0FBVyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ3BELHlCQUF5QjtRQUN6QixNQUFNLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxXQUFXLEVBQUUsVUFBVSxDQUFDLENBQUM7UUFDdEQscUJBQXFCO1FBQ3JCLEdBQUcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUVoRCxLQUFLLEdBQUcsQ0FBQyxHQUFHLEtBQUssRUFBRSxHQUFHLE1BQU0sRUFBRSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBRXRDLE9BQU8sS0FBSyxDQUFDO0lBQ2pCLENBQUM7SUFFRCxjQUFjLENBQUMsV0FBbUIsRUFBRSxVQUFrQjtRQUNsRCxJQUFJLFVBQVUsR0FBRyxXQUFXLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsR0FB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Q0YsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3hFLG1CQUFtQjtZQUNuQixLQUFLLFVBQVU7Z0JBQ1gsT0FBTyxDQUFDLFVBQVUsR0FBRyxDQUFDLEVBQUUsVUFBVSxHQUFHLENBQUMsRUFBRSxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDM0csd0JBQXdCO1lBQ3hCO2dCQUNJLE9BQU8sQ0FBQyxXQUFXLEdBQUcsQ0FBQyxFQUFFLFdBQVcsRUFBRSxXQUFXLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDO1NBQ2pIO0lBQ0wsQ0FBQztJQUVPLG9CQUFvQixDQUFDLEtBQXNCLEVBQUUsS0FBYSxFQUFFLGFBQXVCO1FBQ3ZGLE9BQU8sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxhQUFhLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDO0lBQzdFLENBQUM7OzhHQXhGUSxpQkFBaUI7a0hBQWpCLGlCQUFpQjsyRkFBakIsaUJBQWlCO2tCQUQ3QixVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBQYWdlIH0gZnJvbSAnLi9wYWdpbmF0aW9uLmNvbXBvbmVudCc7XG5cbmludGVyZmFjZSBQYWdpbmF0aW9uSXRlbSB7XG4gICAgbGFiZWw6IHN0cmluZyB8IG51bWJlcjtcbiAgICB2YWx1ZTogbnVtYmVyO1xuICAgIGNsYXNzOiBzdHJpbmc7XG59XG5cbi8qKiBAZG9jcy1wcml2YXRlICovXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgTnhQYWdpbmF0aW9uVXRpbHMge1xuICAgIHByaXZhdGUgX3BhZ2VzTW9iaWxlID0gMztcbiAgICBwcml2YXRlIF9lbGlwc2lzVGV4dCA9ICcuLi4nO1xuICAgIHByaXZhdGUgX2NsYXNzRXhwYW5kZWQgPSAnZXhwYW5kZWQtdmlldyc7XG5cbiAgICBnZXRQYWdlcyhjdXJyZW50UGFnZTogbnVtYmVyLCB0b3RhbFBhZ2VzOiBudW1iZXIpOiBQYWdlW10ge1xuICAgICAgICBsZXQgcGFnZXMgPSBbXTtcbiAgICAgICAgbGV0IHN0YXJ0ID0gW10sXG4gICAgICAgICAgICBtaWRkbGUgPSBbXSxcbiAgICAgICAgICAgIGVuZCA9IFtdO1xuXG4gICAgICAgIC8vIEZpcnN0IGFycmF5IC0+IHN0YXJ0XG4gICAgICAgIHN0YXJ0ID0gdGhpcy5nZXRTdGFydEFycmF5KGN1cnJlbnRQYWdlLCB0b3RhbFBhZ2VzKTtcbiAgICAgICAgLy8gU2Vjb25kIGFycmF5IC0+IG1pZGRsZVxuICAgICAgICBtaWRkbGUgPSB0aGlzLmdldE1pZGRsZUFycmF5KGN1cnJlbnRQYWdlLCB0b3RhbFBhZ2VzKTtcbiAgICAgICAgLy8gVGhpcmQgYXJyYXkgLT4gZW5kXG4gICAgICAgIGVuZCA9IHRoaXMuZ2V0RW5kQXJyYXkoY3VycmVudFBhZ2UsIHRvdGFsUGFnZXMpO1xuXG4gICAgICAgIHBhZ2VzID0gWy4uLnN0YXJ0LCAuLi5taWRkbGUsIC4uLmVuZF07XG5cbiAgICAgICAgcmV0dXJuIHBhZ2VzO1xuICAgIH1cblxuICAgIGdldE1pZGRsZUFycmF5KGN1cnJlbnRQYWdlOiBudW1iZXIsIHRvdGFsUGFnZXM6IG51bWJlcik6IGFueVtdIHtcbiAgICAgICAgbGV0IHBhZ2VOdW1iZXIgPSBjdXJyZW50UGFnZSA8IDYgPyA0IDogY3VycmVudFBhZ2UgLSAxO1xuICAgICAgICBjb25zdCBtaWRkbGUgPSBbXTtcblxuICAgICAgICB3aGlsZSAobWlkZGxlLmxlbmd0aCA8IDMgJiYgcGFnZU51bWJlciA+PSAyICYmIHBhZ2VOdW1iZXIgPD0gdG90YWxQYWdlcyAtIDMgJiYgcGFnZU51bWJlciA8PSBjdXJyZW50UGFnZSArIDEgJiYgcGFnZU51bWJlciA+PSBjdXJyZW50UGFnZSAtIDEpIHtcbiAgICAgICAgICAgIG1pZGRsZS5wdXNoKHRoaXMuY3JlYXRlUGFnaW5hdGlvbkl0ZW0ocGFnZU51bWJlciwgcGFnZU51bWJlcikpO1xuICAgICAgICAgICAgcGFnZU51bWJlcisrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtaWRkbGU7XG4gICAgfVxuICAgIGdldEVuZEFycmF5KGN1cnJlbnRQYWdlOiBudW1iZXIsIHRvdGFsUGFnZXM6IG51bWJlcik6IGFueVtdIHtcbiAgICAgICAgY29uc3QgZW5kID0gW107XG4gICAgICAgIGxldCBjdXJyZW50SXRlbVRvU2hvdzogbnVtYmVyID0gdG90YWxQYWdlcyA8PSAzID8gdG90YWxQYWdlcyArIDEgOiB0b3RhbFBhZ2VzIDw9IDYgPyB0b3RhbFBhZ2VzIC0gKHRvdGFsUGFnZXMgLSA0KSA6IHRvdGFsUGFnZXMgLSAyO1xuICAgICAgICBjb25zdCBzaG93RWxsaXBzaXMgPSBjdXJyZW50UGFnZSA8IHRvdGFsUGFnZXMgLSA0O1xuXG4gICAgICAgIHdoaWxlIChjdXJyZW50SXRlbVRvU2hvdyA8PSB0b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgICBjb25zdCBlbmRJdGVtOiBQYWdpbmF0aW9uSXRlbSA9XG4gICAgICAgICAgICAgICAgZW5kLmxlbmd0aCA9PT0gMCAmJiBzaG93RWxsaXBzaXNcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmNyZWF0ZVBhZ2luYXRpb25JdGVtKHRoaXMuX2VsaXBzaXNUZXh0LCBjdXJyZW50SXRlbVRvU2hvdywgdHJ1ZSlcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmNyZWF0ZVBhZ2luYXRpb25JdGVtKGN1cnJlbnRJdGVtVG9TaG93LCBjdXJyZW50SXRlbVRvU2hvdywgdHJ1ZSk7XG4gICAgICAgICAgICBlbmQucHVzaChlbmRJdGVtKTtcbiAgICAgICAgICAgIGN1cnJlbnRJdGVtVG9TaG93Kys7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZW5kO1xuICAgIH1cbiAgICBnZXRTdGFydEFycmF5KGN1cnJlbnRQYWdlOiBudW1iZXIsIHRvdGFsUGFnZXM6IG51bWJlcik6IGFueVtdIHtcbiAgICAgICAgbGV0IGNvdW50ZXJQYWdlcyA9IDA7XG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gW107XG4gICAgICAgIGNvbnN0IG1heFNpemVBcnJheSA9IDM7XG5cbiAgICAgICAgd2hpbGUgKGNvdW50ZXJQYWdlcyA8IG1heFNpemVBcnJheSAmJiBjb3VudGVyUGFnZXMgPCB0b3RhbFBhZ2VzKSB7XG4gICAgICAgICAgICBjb25zdCBzdGFydEl0ZW0gPVxuICAgICAgICAgICAgICAgIGNvdW50ZXJQYWdlcyA9PT0gMiAmJiBjdXJyZW50UGFnZSA+IDVcbiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmNyZWF0ZVBhZ2luYXRpb25JdGVtKHRoaXMuX2VsaXBzaXNUZXh0LCBjb3VudGVyUGFnZXMsIHRydWUpXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5jcmVhdGVQYWdpbmF0aW9uSXRlbShjb3VudGVyUGFnZXMgKyAxLCBjb3VudGVyUGFnZXMgKyAxLCB0cnVlKTtcblxuICAgICAgICAgICAgc3RhcnQucHVzaChzdGFydEl0ZW0pO1xuICAgICAgICAgICAgY291bnRlclBhZ2VzKys7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3RhcnQ7XG4gICAgfVxuXG4gICAgZ2V0TW9iaWxlUGFnZXMoY3VycmVudFBhZ2U6IG51bWJlciwgdG90YWxQYWdlczogbnVtYmVyKTogYW55W10ge1xuICAgICAgICAvLyBpZiB3ZSBoYXZlIGxlc3MgcGFnZXMgdGhhbiB0aGUgbnVtYmVyIHdlIHdhbnQgdG8gZGlzcGxheSB0YWtlIGFsbFxuICAgICAgICBpZiAodG90YWxQYWdlcyA8IHRoaXMuX3BhZ2VzTW9iaWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShBcnJheSh0b3RhbFBhZ2VzKS5rZXlzKCkpLm1hcChpdGVtID0+IHRoaXMuY3JlYXRlUGFnaW5hdGlvbkl0ZW0oaXRlbSArIDEsIGl0ZW0gKyAxKSk7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKGN1cnJlbnRQYWdlKSB7XG4gICAgICAgICAgICAvLyBmaXJzdCBwYWdlIGFjdGl2ZVxuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHJldHVybiBbMSwgMiwgM10ubWFwKGl0ZW0gPT4gdGhpcy5jcmVhdGVQYWdpbmF0aW9uSXRlbShpdGVtLCBpdGVtKSk7XG4gICAgICAgICAgICAvLyBsYXN0IHBhZ2UgYWN0aXZlXG4gICAgICAgICAgICBjYXNlIHRvdGFsUGFnZXM6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFt0b3RhbFBhZ2VzIC0gMiwgdG90YWxQYWdlcyAtIDEsIHRvdGFsUGFnZXNdLm1hcChpdGVtID0+IHRoaXMuY3JlYXRlUGFnaW5hdGlvbkl0ZW0oaXRlbSwgaXRlbSkpO1xuICAgICAgICAgICAgLy8gYW55IG90aGVyIHBhZ2UgYWN0aXZlXG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiBbY3VycmVudFBhZ2UgLSAxLCBjdXJyZW50UGFnZSwgY3VycmVudFBhZ2UgKyAxXS5tYXAoaXRlbSA9PiB0aGlzLmNyZWF0ZVBhZ2luYXRpb25JdGVtKGl0ZW0sIGl0ZW0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgY3JlYXRlUGFnaW5hdGlvbkl0ZW0obGFiZWw6IHN0cmluZyB8IG51bWJlciwgdmFsdWU6IG51bWJlciwgY2xhc3NFeHBhbmRlZD86IGJvb2xlYW4pOiBQYWdpbmF0aW9uSXRlbSB7XG4gICAgICAgIHJldHVybiB7IGxhYmVsLCB2YWx1ZSwgY2xhc3M6IGNsYXNzRXhwYW5kZWQgPyB0aGlzLl9jbGFzc0V4cGFuZGVkIDogJycgfTtcbiAgICB9XG59XG4iXX0=