import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { Directive, HostBinding, Input } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/cdk/a11y";
const DEFAULT_SIZE = 'medium';
const DEFAULT_TYPE = 'primary';
/** @docs-private */
export class NxButtonBase {
    constructor(_cdr, _elementRef, _focusMonitor) {
        this._cdr = _cdr;
        this._elementRef = _elementRef;
        this._focusMonitor = _focusMonitor;
        this._classNames = '';
        /** @docs-private */
        this.type = DEFAULT_TYPE;
        /** @docs-private */
        this.size = DEFAULT_SIZE;
        this.danger = false;
        this.negative = false;
        this.block = false;
        this.active = false;
        this._disabled = false;
        this._focusMonitor.monitor(this._elementRef);
    }
    /** @docs-private */
    get isPrimary() {
        return this.type === 'primary';
    }
    /** @docs-private */
    get isSecondary() {
        return this.type === 'secondary';
    }
    /** @docs-private */
    get isTertiary() {
        return this.type === 'tertiary';
    }
    /** @docs-private */
    get isCta() {
        return this.type === 'cta';
    }
    /** @docs-private */
    get isEmphasis() {
        return this.type === 'emphasis';
    }
    /** @docs-private */
    get isLarge() {
        return this.size === 'large';
    }
    /** @docs-private */
    get isMedium() {
        return this.size === 'medium';
    }
    /** @docs-private */
    get isSmallMedium() {
        return this.size === 'small-medium';
    }
    /** @docs-private */
    get isSmall() {
        return this.size === 'small';
    }
    /** @docs-private */
    get isDanger() {
        return this.danger;
    }
    /** @docs-private */
    get isBlock() {
        return this.block;
    }
    /** @docs-private */
    get isNegative() {
        return this.negative;
    }
    /** @docs-private */
    get isDisabled() {
        return this.disabled || null;
    }
    /** @docs-private */
    get isAriaDisabled() {
        return this.disabled.toString();
    }
    set disabled(value) {
        this._disabled = coerceBooleanProperty(value);
    }
    get disabled() {
        return this._disabled;
    }
    ngOnDestroy() {
        this._focusMonitor.stopMonitoring(this._elementRef);
    }
    set classNames(value) {
        if (this._classNames === value) {
            return;
        }
        this._classNames = value;
        // TODO kick null safeguards after setter value is properly coerced
        const [type = null] = this._classNames?.match(/primary|secondary|tertiary|cta|emphasis/) ?? [DEFAULT_TYPE];
        this.type = type;
        const [size = null] = this._classNames?.match(/small-medium|small|medium|large/) ?? [DEFAULT_SIZE];
        this.size = size;
        this.danger = !!this._classNames?.includes('danger');
        this.negative = !!this._classNames?.includes('negative');
        this.block = !!this._classNames?.includes('block');
        this._cdr.markForCheck();
    }
    get classNames() {
        return this._classNames;
    }
    /**
     * @docs-private
     * getter used for the modal component as a quickfix
     * since button got changed from directive to component the reference used by the ngOpenModelOnClick directive
     * for nxButtons is a reference to component instance instead of an element reference. As a workaround we need a
     * way to reach the elementRef of the component until the modal gets refactored.
     */
    get elementRef() {
        return this._elementRef;
    }
    setTriggerActive() {
        this.active = true;
        this._cdr.markForCheck();
    }
    setTriggerInactive() {
        this.active = false;
        this._cdr.markForCheck();
    }
}
NxButtonBase.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.1", ngImport: i0, type: NxButtonBase, deps: [{ token: i0.ChangeDetectorRef }, { token: i0.ElementRef }, { token: i1.FocusMonitor }], target: i0.ɵɵFactoryTarget.Directive });
NxButtonBase.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "13.3.1", type: NxButtonBase, inputs: { disabled: "disabled" }, host: { properties: { "class.nx-button--primary": "this.isPrimary", "class.nx-button--secondary": "this.isSecondary", "class.nx-button--tertiary": "this.isTertiary", "class.nx-button--cta": "this.isCta", "class.nx-button--emphasis": "this.isEmphasis", "class.nx-button--large": "this.isLarge", "class.nx-button--medium": "this.isMedium", "class.nx-button--small-medium": "this.isSmallMedium", "class.nx-button--small": "this.isSmall", "class.nx-button--danger": "this.isDanger", "class.nx-button--block": "this.isBlock", "class.nx-button--negative": "this.isNegative", "attr.disabled": "this.isDisabled", "attr.aria-disabled": "this.isAriaDisabled", "class.nx-button--active": "this.active" } }, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.1", ngImport: i0, type: NxButtonBase, decorators: [{
            type: Directive
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }, { type: i0.ElementRef }, { type: i1.FocusMonitor }]; }, propDecorators: { isPrimary: [{
                type: HostBinding,
                args: ['class.nx-button--primary']
            }], isSecondary: [{
                type: HostBinding,
                args: ['class.nx-button--secondary']
            }], isTertiary: [{
                type: HostBinding,
                args: ['class.nx-button--tertiary']
            }], isCta: [{
                type: HostBinding,
                args: ['class.nx-button--cta']
            }], isEmphasis: [{
                type: HostBinding,
                args: ['class.nx-button--emphasis']
            }], isLarge: [{
                type: HostBinding,
                args: ['class.nx-button--large']
            }], isMedium: [{
                type: HostBinding,
                args: ['class.nx-button--medium']
            }], isSmallMedium: [{
                type: HostBinding,
                args: ['class.nx-button--small-medium']
            }], isSmall: [{
                type: HostBinding,
                args: ['class.nx-button--small']
            }], isDanger: [{
                type: HostBinding,
                args: ['class.nx-button--danger']
            }], isBlock: [{
                type: HostBinding,
                args: ['class.nx-button--block']
            }], isNegative: [{
                type: HostBinding,
                args: ['class.nx-button--negative']
            }], isDisabled: [{
                type: HostBinding,
                args: ['attr.disabled']
            }], isAriaDisabled: [{
                type: HostBinding,
                args: ['attr.aria-disabled']
            }], active: [{
                type: HostBinding,
                args: ['class.nx-button--active']
            }], disabled: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLWJhc2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZy1hcXVpbGEvc3JjL2J1dHRvbi9idXR0b24tYmFzZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQWdCLHFCQUFxQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDNUUsT0FBTyxFQUFxQixTQUFTLEVBQWMsV0FBVyxFQUFFLEtBQUssRUFBYSxNQUFNLGVBQWUsQ0FBQzs7O0FBU3hHLE1BQU0sWUFBWSxHQUFHLFFBQVEsQ0FBQztBQUM5QixNQUFNLFlBQVksR0FBRyxTQUFTLENBQUM7QUFFL0Isb0JBQW9CO0FBRXBCLE1BQU0sT0FBTyxZQUFZO0lBbUZyQixZQUFvQixJQUF1QixFQUFVLFdBQXVCLEVBQVUsYUFBMkI7UUFBN0YsU0FBSSxHQUFKLElBQUksQ0FBbUI7UUFBVSxnQkFBVyxHQUFYLFdBQVcsQ0FBWTtRQUFVLGtCQUFhLEdBQWIsYUFBYSxDQUFjO1FBbEZ6RyxnQkFBVyxHQUFHLEVBQUUsQ0FBQztRQTZEekIsb0JBQW9CO1FBQ3BCLFNBQUksR0FBaUIsWUFBWSxDQUFDO1FBRWxDLG9CQUFvQjtRQUNwQixTQUFJLEdBQWlCLFlBQVksQ0FBQztRQUVsQyxXQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ2YsYUFBUSxHQUFHLEtBQUssQ0FBQztRQUNqQixVQUFLLEdBQUcsS0FBSyxDQUFDO1FBRWQsV0FBTSxHQUFHLEtBQUssQ0FBQztRQUNQLGNBQVMsR0FBRyxLQUFLLENBQUM7UUFXdEIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ2pELENBQUM7SUFsRkQsb0JBQW9CO0lBQ3BCLElBQTZDLFNBQVM7UUFDbEQsT0FBTyxJQUFJLENBQUMsSUFBSSxLQUFLLFNBQVMsQ0FBQztJQUNuQyxDQUFDO0lBQ0Qsb0JBQW9CO0lBQ3BCLElBQStDLFdBQVc7UUFDdEQsT0FB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O2dCQUlTLFVBQVU7c0JBQXZELFdBQVc7dUJBQUMsMkJBQTJCO2dCQUlOLFVBQVU7c0JBQTNDLFdBQVc7dUJBQUMsZUFBZTtnQkFJVyxjQUFjO3NCQUFwRCxXQUFXO3VCQUFDLG9CQUFvQjtnQkFjakMsTUFBTTtzQkFETCxXQUFXO3VCQUFDLHlCQUF5QjtnQkFLbEMsUUFBUTtzQkFEWCxLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRm9jdXNNb25pdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2ExMXknO1xuaW1wb3J0IHsgQm9vbGVhbklucHV0LCBjb2VyY2VCb29sZWFuUHJvcGVydHkgfSBmcm9tICdAYW5ndWxhci9jZGsvY29lcmNpb24nO1xuaW1wb3J0IHsgQ2hhbmdlRGV0ZWN0b3JSZWYsIERpcmVjdGl2ZSwgRWxlbWVudFJlZiwgSG9zdEJpbmRpbmcsIElucHV0LCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE54VHJpZ2dlckJ1dHRvbiB9IGZyb20gJ0BhcG9zaW4vbmctYXF1aWxhL292ZXJsYXknO1xuXG4vKiogVHlwZSBvZiBhIGJ1dHRvbi4gKi9cbmV4cG9ydCB0eXBlIE54QnV0dG9uVHlwZSA9ICdwcmltYXJ5JyB8ICdzZWNvbmRhcnknIHwgJ3RlcnRpYXJ5JyB8ICdjdGEnIHwgJ2VtcGhhc2lzJztcblxuLyoqIFNpemUgb2YgYSBidXR0b24uICovXG5leHBvcnQgdHlwZSBOeEJ1dHRvblNpemUgPSAnc21hbGwnIHwgJ3NtYWxsLW1lZGl1bScgfCAnbWVkaXVtJyB8ICdsYXJnZSc7XG5cbmNvbnN0IERFRkFVTFRfU0laRSA9ICdtZWRpdW0nO1xuY29uc3QgREVGQVVMVF9UWVBFID0gJ3ByaW1hcnknO1xuXG4vKiogQGRvY3MtcHJpdmF0ZSAqL1xuQERpcmVjdGl2ZSgpXG5leHBvcnQgY2xhc3MgTnhCdXR0b25CYXNlIGltcGxlbWVudHMgTnhUcmlnZ2VyQnV0dG9uLCBPbkRlc3Ryb3kge1xuICAgIHByaXZhdGUgX2NsYXNzTmFtZXMgPSAnJztcblxuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5ueC1idXR0b24tLXByaW1hcnknKSBnZXQgaXNQcmltYXJ5KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSAncHJpbWFyeSc7XG4gICAgfVxuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5ueC1idXR0b24tLXNlY29uZGFyeScpIGdldCBpc1NlY29uZGFyeSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gJ3NlY29uZGFyeSc7XG4gICAgfVxuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5ueC1idXR0b24tLXRlcnRpYXJ5JykgZ2V0IGlzVGVydGlhcnkoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09ICd0ZXJ0aWFyeSc7XG4gICAgfVxuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5ueC1idXR0b24tLWN0YScpIGdldCBpc0N0YSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gJ2N0YSc7XG4gICAgfVxuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5ueC1idXR0b24tLWVtcGhhc2lzJykgZ2V0IGlzRW1waGFzaXMoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09ICdlbXBoYXNpcyc7XG4gICAgfVxuXG4gICAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLm54LWJ1dHRvbi0tbGFyZ2UnKSBnZXQgaXNMYXJnZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICB9XG4gICAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLm54LWJ1dHRvbi0tbWVkaXVtJykgZ2V0IGlzTWVkaXVtKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbWVkaXVtJztcbiAgICB9XG4gICAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLm54LWJ1dHRvbi0tc21hbGwtbWVkaXVtJykgZ2V0IGlzU21hbGxNZWRpdW0oKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdzbWFsbC1tZWRpdW0nO1xuICAgIH1cbiAgICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICAgIEBIb3N0QmluZGluZygnY2xhc3MubngtYnV0dG9uLS1zbWFsbCcpIGdldCBpc1NtYWxsKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnc21hbGwnO1xuICAgIH1cblxuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcy5ueC1idXR0b24tLWRhbmdlcicpIGdldCBpc0RhbmdlcigpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGFuZ2VyO1xuICAgIH1cbiAgICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICAgIEBIb3N0QmluZGluZygnY2xhc3MubngtYnV0dG9uLS1ibG9jaycpIGdldCBpc0Jsb2NrKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5ibG9jaztcbiAgICB9XG4gICAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLm54LWJ1dHRvbi0tbmVnYXRpdmUnKSBnZXQgaXNOZWdhdGl2ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmVnYXRpdmU7XG4gICAgfVxuICAgIC8qKiBAZG9jcy1wcml2YXRlICovXG4gICAgQEhvc3RCaW5kaW5nKCdhdHRyLmRpc2FibGVkJykgZ2V0IGlzRGlzYWJsZWQoKTogYm9vbGVhbiB8IG51bGwge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZCB8fCBudWxsO1xuICAgIH1cbiAgICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICAgIEBIb3N0QmluZGluZygnYXR0ci5hcmlhLWRpc2FibGVkJykgZ2V0IGlzQXJpYURpc2FibGVkKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgICB0eXBlOiBOeEJ1dHRvblR5cGUgPSBERUZBVUxUX1RZUEU7XG5cbiAgICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICAgIHNpemU6IE54QnV0dG9uU2l6ZSA9IERFRkFVTFRfU0laRTtcblxuICAgIGRhbmdlciA9IGZhbHNlO1xuICAgIG5lZ2F0aXZlID0gZmFsc2U7XG4gICAgYmxvY2sgPSBmYWxzZTtcbiAgICBASG9zdEJpbmRpbmcoJ2NsYXNzLm54LWJ1dHRvbi0tYWN0aXZlJylcbiAgICBhY3RpdmUgPSBmYWxzZTtcbiAgICBwcml2YXRlIF9kaXNhYmxlZCA9IGZhbHNlO1xuXG4gICAgQElucHV0KClcbiAgICBzZXQgZGlzYWJsZWQodmFsdWU6IEJvb2xlYW5JbnB1dCkge1xuICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIGdldCBkaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX2NkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsIHByaXZhdGUgX2VsZW1lbnRSZWY6IEVsZW1lbnRSZWYsIHByaXZhdGUgX2ZvY3VzTW9uaXRvcjogRm9jdXNNb25pdG9yKSB7XG4gICAgICAgIHRoaXMuX2ZvY3VzTW9uaXRvci5tb25pdG9yKHRoaXMuX2VsZW1lbnRSZWYpO1xuICAgIH1cblxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9mb2N1c01vbml0b3Iuc3RvcE1vbml0b3JpbmcodGhpcy5fZWxlbWVudFJlZik7XG4gICAgfVxuXG4gICAgc2V0IGNsYXNzTmFtZXModmFsdWU6IHN0cmluZykge1xuICAgICAgICBpZiAodGhpcy5fY2xhc3NOYW1lcyA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jbGFzc05hbWVzID0gdmFsdWU7XG5cbiAgICAgICAgLy8gVE9ETyBraWNrIG51bGwgc2FmZWd1YXJkcyBhZnRlciBzZXR0ZXIgdmFsdWUgaXMgcHJvcGVybHkgY29lcmNlZFxuICAgICAgICBjb25zdCBbdHlwZSA9IG51bGxdID0gdGhpcy5fY2xhc3NOYW1lcz8ubWF0Y2goL3ByaW1hcnl8c2Vjb25kYXJ5fHRlcnRpYXJ5fGN0YXxlbXBoYXNpcy8pID8/IFtERUZBVUxUX1RZUEVdO1xuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlIGFzIE54QnV0dG9uVHlwZTtcblxuICAgICAgICBjb25zdCBbc2l6ZSA9IG51bGxdID0gdGhpcy5fY2xhc3NOYW1lcz8ubWF0Y2goL3NtYWxsLW1lZGl1bXxzbWFsbHxtZWRpdW18bGFyZ2UvKSA/PyBbREVGQVVMVF9TSVpFXTtcbiAgICAgICAgdGhpcy5zaXplID0gc2l6ZSBhcyBOeEJ1dHRvblNpemU7XG5cbiAgICAgICAgdGhpcy5kYW5nZXIgPSAhIXRoaXMuX2NsYXNzTmFtZXM/LmluY2x1ZGVzKCdkYW5nZXInKTtcbiAgICAgICAgdGhpcy5uZWdhdGl2ZSA9ICEhdGhpcy5fY2xhc3NOYW1lcz8uaW5jbHVkZXMoJ25lZ2F0aXZlJyk7XG4gICAgICAgIHRoaXMuYmxvY2sgPSAhIXRoaXMuX2NsYXNzTmFtZXM/LmluY2x1ZGVzKCdibG9jaycpO1xuXG4gICAgICAgIHRoaXMuX2Nkci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG5cbiAgICBnZXQgY2xhc3NOYW1lcygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2xhc3NOYW1lcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZG9jcy1wcml2YXRlXG4gICAgICogZ2V0dGVyIHVzZWQgZm9yIHRoZSBtb2RhbCBjb21wb25lbnQgYXMgYSBxdWlja2ZpeFxuICAgICAqIHNpbmNlIGJ1dHRvbiBnb3QgY2hhbmdlZCBmcm9tIGRpcmVjdGl2ZSB0byBjb21wb25lbnQgdGhlIHJlZmVyZW5jZSB1c2VkIGJ5IHRoZSBuZ09wZW5Nb2RlbE9uQ2xpY2sgZGlyZWN0aXZlXG4gICAgICogZm9yIG54QnV0dG9ucyBpcyBhIHJlZmVyZW5jZSB0byBjb21wb25lbnQgaW5zdGFuY2UgaW5zdGVhZCBvZiBhbiBlbGVtZW50IHJlZmVyZW5jZS4gQXMgYSB3b3JrYXJvdW5kIHdlIG5lZWQgYVxuICAgICAqIHdheSB0byByZWFjaCB0aGUgZWxlbWVudFJlZiBvZiB0aGUgY29tcG9uZW50IHVudGlsIHRoZSBtb2RhbCBnZXRzIHJlZmFjdG9yZWQuXG4gICAgICovXG4gICAgZ2V0IGVsZW1lbnRSZWYoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50UmVmO1xuICAgIH1cblxuICAgIHNldFRyaWdnZXJBY3RpdmUoKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cblxuICAgIHNldFRyaWdnZXJJbmFjdGl2ZSgpIHtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY2RyLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbn1cbiJdfQ==