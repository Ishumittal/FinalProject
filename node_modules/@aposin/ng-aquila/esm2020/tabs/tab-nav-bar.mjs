import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { ChangeDetectionStrategy, Component, ContentChildren, Directive, forwardRef, Inject, Input, Optional, SkipSelf, ViewChild, } from '@angular/core';
import { NxScrollableTabBar } from './scrollable-tab-bar';
import { TAB_NAV_BAR_DEFAULT_OPTIONS } from './tabs.models';
import * as i0 from "@angular/core";
import * as i1 from "@angular/cdk/bidi";
import * as i2 from "./scroll-indicator/scroll-indicator";
import * as i3 from "@angular/common";
import * as i4 from "@angular/cdk/a11y";
export class NxTabNavBarComponent extends NxScrollableTabBar {
    constructor(_cdr, _dir, _defaultOptions, _element) {
        super(_cdr, _dir, _element);
        this._cdr = _cdr;
        this._defaultOptions = _defaultOptions;
        this._negative = false;
        this._disabled = false;
    }
    /** Whether the tab nav bar has negative styling. */
    set negative(value) {
        const newValue = coerceBooleanProperty(value);
        if (newValue !== this.negative) {
            this._negative = newValue;
            this._cdr.markForCheck();
        }
    }
    get negative() {
        return this._negative;
    }
    /** Whether the tab nav bar has disabled styling. */
    set disabled(value) {
        const newValue = coerceBooleanProperty(value);
        if (newValue !== this.disabled) {
            this._disabled = newValue;
            this._cdr.markForCheck();
        }
    }
    get disabled() {
        return this._disabled;
    }
    /**
     * **Expert option**
     *
     * Sets the appearance of the tab nav bar. Default: 'default'.
     */
    set appearance(value) {
        if (this._appearance !== value) {
            this._appearance = value;
            this._cdr.markForCheck();
        }
    }
    get appearance() {
        return this._appearance || this._defaultOptions?.appearance || 'default';
    }
}
NxTabNavBarComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.1", ngImport: i0, type: NxTabNavBarComponent, deps: [{ token: i0.ChangeDetectorRef }, { token: i1.Directionality, optional: true }, { token: TAB_NAV_BAR_DEFAULT_OPTIONS, optional: true }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component });
NxTabNavBarComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "13.3.1", type: NxTabNavBarComponent, selector: "nx-tab-nav-bar", inputs: { negative: "negative", disabled: "disabled", appearance: "appearance" }, host: { attributes: { "role": "navigation" }, properties: { "class.is-negative": "negative", "class.is-disabled": "disabled", "class.is-expert": "appearance === \"expert\"", "class.at-start": "_isScrolledToStart", "class.scrollable": "scrollable" } }, queries: [{ propertyName: "tabButtons", predicate: i0.forwardRef(function () { return NxTabLinkDirective; }) }], viewQueries: [{ propertyName: "scrollableTabsList", first: true, predicate: ["tabsList"], descendants: true }], usesInheritance: true, ngImport: i0, template: "<nx-tab-scroll-indicator *ngIf=\"scrollable\" scrollDirection=\"start\" [isScrolledToStart]=\"_isScrolledToStart\" (buttonClicked)=\"scrollToStart()\">\n</nx-tab-scroll-indicator>\n<div #tabsList class=\"nx-tab-nav-bar\" tabindex=\"-1\">\n    <ng-content></ng-content>\n</div>\n<nx-tab-scroll-indicator *ngIf=\"scrollable\" scrollDirection=\"end\" [isScrolledToEnd]=\"_isScrolledToEnd\" (buttonClicked)=\"scrollToEnd()\">\n</nx-tab-scroll-indicator>\n", styles: [":host{display:flex;align-items:flex-end;justify-content:center}:host.is-expert{justify-content:flex-start;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:var(--tab-expert-bottom-border-color)}:host.is-expert .nx-tab-nav-bar{width:100%}:host .nx-tab-nav-bar{display:flex;position:relative;overflow-x:scroll;outline:none;-ms-overflow-style:none;scrollbar-width:none}:host .nx-tab-nav-bar::-webkit-scrollbar{display:none}:host.at-start .nx-tab-nav-bar{margin-left:-8px;padding-left:8px}[dir=rtl] :host.at-start .nx-tab-nav-bar{margin-left:0;padding-left:0;margin-right:-8px;padding-right:8px}:host:not(.scrollable) .nx-tab-nav-bar{margin-right:-8px;padding-right:8px}[dir=rtl] :host:not(.scrollable) .nx-tab-nav-bar{margin-right:0;padding-right:0;margin-left:-8px;padding-left:8px}:host ::ng-deep a.nx-tab-link{font-size:var(--tab-item-font-size);line-height:var(--tab-item-line-height);font-weight:var(--tab-item-font-weight);letter-spacing:var(--tab-item-letter-spacing);text-decoration:none;border:none;background:transparent;color:var(--tab-item-color);padding:4px 0 12px;margin:4px 16px 0;outline:none;position:relative;cursor:pointer;white-space:nowrap}@media screen and (-ms-high-contrast: active){:host ::ng-deep a.nx-tab-link{background-color:buttonFace;border-color:buttonText;color:buttonText;-ms-high-contrast-adjust:none}}:host ::ng-deep a.nx-tab-link:hover{color:var(--tab-item-hover-color)}:host ::ng-deep a.nx-tab-link:active{color:var(--tab-item-active-color)}:host ::ng-deep a.nx-tab-link.is-active{border-width:4px;font-weight:700;border-bottom-style:solid;border-color:var(--tab-item-active-border-color);padding-bottom:8px;cursor:default}:host ::ng-deep a.nx-tab-link.is-active:hover,:host ::ng-deep a.nx-tab-link.is-active:active{color:var(--tab-item-color)}@media screen and (-ms-high-contrast: active){:host ::ng-deep a.nx-tab-link.is-active{background-color:highlight;color:highlightText;border-color:highlight}}:host:not(.is-expert) ::ng-deep a.nx-tab-link:not(.is-active):before{content:\"\";position:absolute;width:calc(100% + 64px);height:1px;background-color:var(--tab-item-border-color);bottom:0;left:-32px}:host:not(.is-expert) ::ng-deep a.nx-tab-link:first-child:before{left:0px;width:calc(100% + 32px)}[dir=rtl] :host:not(.is-expert) ::ng-deep a.nx-tab-link:first-child:before{left:auto;left:initial;right:0}:host:not(.is-expert) ::ng-deep a.nx-tab-link:last-child:before{width:calc(100% + 32px)}[dir=rtl] :host:not(.is-expert) ::ng-deep a.nx-tab-link:last-child:before{left:auto;left:initial;right:-32px}:host ::ng-deep a.nx-tab-link:first-child{margin-left:0}[dir=rtl] :host ::ng-deep a.nx-tab-link:first-child{margin-right:0;margin-left:16px}:host ::ng-deep a.nx-tab-link:last-child{margin-right:0}[dir=rtl] :host ::ng-deep a.nx-tab-link:last-child{margin-right:16px;margin-left:0}:host.is-expert ::ng-deep a.nx-tab-link{padding:4px 0}:host.is-expert ::ng-deep a.nx-tab-link.is-disabled:not(.is-active){border-bottom-color:transparent}:host.is-expert:not(.is-negative) ::ng-deep a.nx-tab-link:not(.is-disabled):not(.is-active){color:var(--tab-expert-color)}@media screen and (-ms-high-contrast: active){:host.is-expert:not(.is-negative) ::ng-deep a.nx-tab-link:not(.is-disabled):not(.is-active){color:buttonText}}:host.is-expert:not(.is-negative) ::ng-deep a.nx-tab-link.is-active{border-color:var(--tab-item-active-border-color)}:host(.is-negative){color:var(--negative)}:host(.is-negative) ::ng-deep a.nx-tab-link{color:var(--negative);border-bottom-color:var(--negative)}:host(.is-negative) ::ng-deep a.nx-tab-link.is-disabled{color:var(--tab-item-disabled-negative-color);border-color:var(--tab-item-disabled-negative-color)}@media screen and (-ms-high-contrast: active){:host(.is-negative) ::ng-deep a.nx-tab-link.is-active{background-color:highlight;color:highlightText;border-color:windowFrame}}:host.is-expert.is-negative ::ng-deep a.nx-tab-link:not(.is-active){border-bottom-color:transparent}:host ::ng-deep a.nx-tab-link.is-disabled{border-color:var(--tab-item-disabled-border-color);color:var(--tab-item-disabled-color);cursor:not-allowed}:host ::ng-deep a.nx-tab-link.is-disabled:hover,:host ::ng-deep a.nx-tab-link.is-disabled:active{color:var(--tab-item-disabled-color)}@media screen and (-ms-high-contrast: active){:host ::ng-deep a.nx-tab-link.is-disabled{border-color:GrayText;background-color:buttonFace;color:GrayText}}:host(.is-disabled){cursor:not-allowed}:host(.is-disabled.is-negative) ::ng-deep a.nx-tab-link{color:var(--tab-item-disabled-negative-color);border-color:var(--tab-item-disabled-negative-color)}:host ::ng-deep .nx-tab-link:not(.is-disabled).cdk-keyboard-focused:after{content:\"\";display:block;position:absolute;height:var(--tab-item-line-height);width:100%;top:4px;box-shadow:var(--focus-box-shadow);border-radius:4px}@media screen and (-ms-high-contrast: active),(forced-colors: active){:host ::ng-deep .nx-tab-link:not(.is-disabled).cdk-keyboard-focused:after{box-shadow:0 0 0 2px background,0 0 0 6px windowText;outline:4px solid CanvasText;outline-offset:2px}}@media screen and (-ms-high-contrast: active){:host(.is-negative){color:buttonText}:host(.is-negative) ::ng-deep a.nx-tab-link{color:buttonText;border-bottom-color:buttonText}:host(.is-negative) ::ng-deep a.nx-tab-link.is-active{background-color:highlight;color:highlightText;border-color:highlight}:host(.is-negative) ::ng-deep a.nx-tab-link.is-disabled{color:GrayText;border-bottom-color:GrayText}}\n"], components: [{ type: i2.NxTabScrollIndicator, selector: "nx-tab-scroll-indicator", inputs: ["scrollDirection", "isScrolledToStart", "isScrolledToEnd"], outputs: ["buttonClicked"] }], directives: [{ type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.1", ngImport: i0, type: NxTabNavBarComponent, decorators: [{
            type: Component,
            args: [{ selector: 'nx-tab-nav-bar', changeDetection: ChangeDetectionStrategy.OnPush, host: {
                        '[class.is-negative]': 'negative',
                        '[class.is-disabled]': 'disabled',
                        '[class.is-expert]': 'appearance === "expert"',
                        role: 'navigation',
                        '[class.at-start]': '_isScrolledToStart',
                        '[class.scrollable]': 'scrollable',
                    }, template: "<nx-tab-scroll-indicator *ngIf=\"scrollable\" scrollDirection=\"start\" [isScrolledToStart]=\"_isScrolledToStart\" (buttonClicked)=\"scrollToStart()\">\n</nx-tab-scroll-indicator>\n<div #tabsList class=\"nx-tab-nav-bar\" tabindex=\"-1\">\n    <ng-content></ng-content>\n</div>\n<nx-tab-scroll-indicator *ngIf=\"scrollable\" scrollDirection=\"end\" [isScrolledToEnd]=\"_isScrolledToEnd\" (buttonClicked)=\"scrollToEnd()\">\n</nx-tab-scroll-indicator>\n", styles: [":host{display:flex;align-items:flex-end;justify-content:center}:host.is-expert{justify-content:flex-start;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:var(--tab-expert-bottom-border-color)}:host.is-expert .nx-tab-nav-bar{width:100%}:host .nx-tab-nav-bar{display:flex;position:relative;overflow-x:scroll;outline:none;-ms-overflow-style:none;scrollbar-width:none}:host .nx-tab-nav-bar::-webkit-scrollbar{display:none}:host.at-start .nx-tab-nav-bar{margin-left:-8px;padding-left:8px}[dir=rtl] :host.at-start .nx-tab-nav-bar{margin-left:0;padding-left:0;margin-right:-8px;padding-right:8px}:host:not(.scrollable) .nx-tab-nav-bar{margin-right:-8px;padding-right:8px}[dir=rtl] :host:not(.scrollable) .nx-tab-nav-bar{margin-right:0;padding-right:0;margin-left:-8px;padding-left:8px}:host ::ng-deep a.nx-tab-link{font-size:var(--tab-item-font-size);line-height:var(--tab-item-line-height);font-weight:var(--tab-item-font-weight);letter-spacing:var(--tab-item-letter-spacing);text-decoration:none;border:none;background:transparent;color:var(--tab-item-color);padding:4px 0 12px;margin:4px 16px 0;outline:none;position:relative;cursor:pointer;white-space:nowrap}@media screen and (-ms-high-contrast: active){:host ::ng-deep a.nx-tab-link{background-color:buttonFace;border-color:buttonText;color:buttonText;-ms-high-contrast-adjust:none}}:host ::ng-deep a.nx-tab-link:hover{color:var(--tab-item-hover-color)}:host ::ng-deep a.nx-tab-link:active{color:var(--tab-item-active-color)}:host ::ng-deep a.nx-tab-link.is-active{border-width:4px;font-weight:700;border-bottom-style:solid;border-color:var(--tab-item-active-border-color);padding-bottom:8px;cursor:default}:host ::ng-deep a.nx-tab-link.is-active:hover,:host ::ng-deep a.nx-tab-link.is-active:active{color:var(--tab-item-color)}@media screen and (-ms-high-contrast: active){:host ::ng-deep a.nx-tab-link.is-active{background-color:highlight;color:highlightText;border-color:highlight}}:host:not(.is-expert) ::ng-deep a.nx-tab-link:not(.is-active):before{content:\"\";position:absolute;width:calc(100% + 64px);height:1px;background-color:var(--tab-item-border-color);bottom:0;left:-32px}:host:not(.is-expert) ::ng-deep a.nx-tab-link:first-child:before{left:0px;width:calc(100% + 32px)}[dir=rtl] :host:not(.is-expert) ::ng-deep a.nx-tab-link:first-child:before{left:auto;left:initial;right:0}:host:not(.is-expert) ::ng-deep a.nx-tab-link:last-child:before{width:calc(100% + 32px)}[dir=rtl] :host:not(.is-expert) ::ng-deep a.nx-tab-link:last-child:before{left:auto;left:initial;right:-32px}:host ::ng-deep a.nx-tab-link:first-child{margin-left:0}[dir=rtl] :host ::ng-deep a.nx-tab-link:first-child{margin-right:0;margin-left:16px}:host ::ng-deep a.nx-tab-link:last-child{margin-right:0}[dir=rtl] :host ::ng-deep a.nx-tab-link:last-child{margin-right:16px;margin-left:0}:host.is-expert ::ng-deep a.nx-tab-link{padding:4px 0}:host.is-expert ::ng-deep a.nx-tab-link.is-disabled:not(.is-active){border-bottom-color:transparent}:host.is-expert:not(.is-negative) ::ng-deep a.nx-tab-link:not(.is-disabled):not(.is-active){color:var(--tab-expert-color)}@media screen and (-ms-high-contrast: active){:host.is-expert:not(.is-negative) ::ng-deep a.nx-tab-link:not(.is-disabled):not(.is-active){color:buttonText}}:host.is-expert:not(.is-negative) ::ng-deep a.nx-tab-link.is-active{border-color:var(--tab-item-active-border-color)}:host(.is-negative){color:var(--negative)}:host(.is-negative) ::ng-deep a.nx-tab-link{color:var(--negative);border-bottom-color:var(--negative)}:host(.is-negative) ::ng-deep a.nx-tab-link.is-disabled{color:var(--tab-item-disabled-negative-color);border-color:var(--tab-item-disabled-negative-color)}@media screen and (-ms-high-contrast: active){:host(.is-negative) ::ng-deep a.nx-tab-link.is-active{background-color:highlight;color:highlightText;border-color:windowFrame}}:host.is-expert.is-negative ::ng-deep a.nx-tab-link:not(.is-active){border-bottom-color:transparent}:host ::ng-deep a.nx-tab-link.is-disabled{border-color:var(--tab-item-disabled-border-color);color:var(--tab-item-disabled-color);cursor:not-allowed}:host ::ng-deep a.nx-tab-link.is-disabled:hover,:host ::ng-deep a.nx-tab-link.is-disabled:active{color:var(--tab-item-disabled-color)}@media screen and (-ms-high-contrast: active){:host ::ng-deep a.nx-tab-link.is-disabled{border-color:GrayText;background-color:buttonFace;color:GrayText}}:host(.is-disabled){cursor:not-allowed}:host(.is-disabled.is-negative) ::ng-deep a.nx-tab-link{color:var(--tab-item-disabled-negative-color);border-color:var(--tab-item-disabled-negative-color)}:host ::ng-deep .nx-tab-link:not(.is-disabled).cdk-keyboard-focused:after{content:\"\";display:block;position:absolute;height:var(--tab-item-line-height);width:100%;top:4px;box-shadow:var(--focus-box-shadow);border-radius:4px}@media screen and (-ms-high-contrast: active),(forced-colors: active){:host ::ng-deep .nx-tab-link:not(.is-disabled).cdk-keyboard-focused:after{box-shadow:0 0 0 2px background,0 0 0 6px windowText;outline:4px solid CanvasText;outline-offset:2px}}@media screen and (-ms-high-contrast: active){:host(.is-negative){color:buttonText}:host(.is-negative) ::ng-deep a.nx-tab-link{color:buttonText;border-bottom-color:buttonText}:host(.is-negative) ::ng-deep a.nx-tab-link.is-active{background-color:highlight;color:highlightText;border-color:highlight}:host(.is-negative) ::ng-deep a.nx-tab-link.is-disabled{color:GrayText;border-bottom-color:GrayText}}\n"] }]
        }], ctorParameters: function () { return [{ type: i0.ChangeDetectorRef }, { type: i1.Directionality, decorators: [{
                    type: Optional
                }] }, { type: undefined, decorators: [{
                    type: Optional
                }, {
                    type: Inject,
                    args: [TAB_NAV_BAR_DEFAULT_OPTIONS]
                }] }, { type: i0.ElementRef }]; }, propDecorators: { scrollableTabsList: [{
                type: ViewChild,
                args: ['tabsList']
            }], tabButtons: [{
                type: ContentChildren,
                args: [forwardRef(() => NxTabLinkDirective)]
            }], negative: [{
                type: Input
            }], disabled: [{
                type: Input
            }], appearance: [{
                type: Input
            }] } });
export class NxTabLinkDirective {
    constructor(_tabNavBar, _elementRef, _focusMonitor) {
        this._tabNavBar = _tabNavBar;
        this._elementRef = _elementRef;
        this._focusMonitor = _focusMonitor;
        this._active = false;
        this._disabled = false;
        if (!this._tabNavBar) {
            throw Error(`The nx-tab-link element has to be wrapped in a nx-tab-nav-bar to work.`);
        }
        this._focusMonitor.monitor(this._elementRef);
    }
    /** Whether the tab link is active and has the active styling. */
    get active() {
        return this._active;
    }
    set active(value) {
        const newValue = coerceBooleanProperty(value);
        if (newValue !== this._active) {
            this._active = newValue;
        }
    }
    /** Whether the tab link is disabled. Default: false. */
    get disabled() {
        return this._tabNavBar?.disabled || this._disabled;
    }
    set disabled(value) {
        const newValue = coerceBooleanProperty(value);
        if (newValue !== this._disabled) {
            this._disabled = newValue;
        }
    }
    ngOnDestroy() {
        this._focusMonitor.stopMonitoring(this._elementRef);
    }
    _getTabIndex() {
        return this.disabled ? '-1' : '0';
    }
}
NxTabLinkDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "13.3.1", ngImport: i0, type: NxTabLinkDirective, deps: [{ token: NxTabNavBarComponent, optional: true, skipSelf: true }, { token: i0.ElementRef }, { token: i4.FocusMonitor }], target: i0.ɵɵFactoryTarget.Directive });
NxTabLinkDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: "12.0.0", version: "13.3.1", type: NxTabLinkDirective, selector: "[nxTabLink]", inputs: { active: "active", disabled: "disabled" }, host: { properties: { "class.nx-tab-link": "true", "class.is-active": "active", "class.is-disabled": "disabled", "attr.aria-current": "active", "attr.tabindex": "_getTabIndex()", "attr.aria-disabled": "disabled.toString()" } }, ngImport: i0 });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "13.3.1", ngImport: i0, type: NxTabLinkDirective, decorators: [{
            type: Directive,
            args: [{
                    selector: '[nxTabLink]',
                    host: {
                        '[class.nx-tab-link]': 'true',
                        '[class.is-active]': 'active',
                        '[class.is-disabled]': 'disabled',
                        '[attr.aria-current]': 'active',
                        '[attr.tabindex]': '_getTabIndex()',
                        '[attr.aria-disabled]': 'disabled.toString()',
                    },
                }]
        }], ctorParameters: function () { return [{ type: NxTabNavBarComponent, decorators: [{
                    type: Optional
                }, {
                    type: SkipSelf
                }] }, { type: i0.ElementRef }, { type: i4.FocusMonitor }]; }, propDecorators: { active: [{
                type: Input
            }], disabled: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFiLW5hdi1iYXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZy1hcXVpbGEvc3JjL3RhYnMvdGFiLW5hdi1iYXIudHMiLCIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZy1hcXVpbGEvc3JjL3RhYnMvdGFiLW5hdi1iYXIuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQSxPQUFPLEVBQWdCLHFCQUFxQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDNUUsT0FBTyxFQUNILHVCQUF1QixFQUV2QixTQUFTLEVBQ1QsZUFBZSxFQUNmLFNBQVMsRUFFVCxVQUFVLEVBQ1YsTUFBTSxFQUNOLEtBQUssRUFFTCxRQUFRLEVBRVIsUUFBUSxFQUNSLFNBQVMsR0FDWixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUMxRCxPQUFPLEVBQW9CLDJCQUEyQixFQUEyQixNQUFNLGVBQWUsQ0FBQzs7Ozs7O0FBZ0J2RyxNQUFNLE9BQU8sb0JBQXFCLFNBQVEsa0JBQWtCO0lBc0R4RCxZQUNXLElBQXVCLEVBQ2xCLElBQTJCLEVBQ2tCLGVBQStDLEVBQ3hHLFFBQW9CO1FBRXBCLEtBQUssQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBTHJCLFNBQUksR0FBSixJQUFJLENBQW1CO1FBRTJCLG9CQUFlLEdBQWYsZUFBZSxDQUFnQztRQXJEcEcsY0FBUyxHQUFHLEtBQUssQ0FBQztRQWdCbEIsY0FBUyxHQUFHLEtBQUssQ0FBQztJQXlDMUIsQ0FBQztJQXZERCxvREFBb0Q7SUFDcEQsSUFDSSxRQUFRLENBQUMsS0FBbUI7UUFDNUIsTUFBTSxRQUFRLEdBQUcscUJBQXFCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDOUMsSUFBSSxRQUFRLEtBQUssSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUM1QixJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEs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QU8sSUFBSSxDQUFDLFVBQVUsRUFBRSxRQUFRLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUN2RCxDQUFDO0lBQ0QsSUFBSSxRQUFRLENBQUMsS0FBbUI7UUFDNUIsTUFBTSxRQUFRLEdBQUcscUJBQXFCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDOUMsSUFBSSxRQUFRLEtBQUssSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUM3QixJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztTQUM3QjtJQUNMLENBQUM7SUFVRCxXQUFXO1FBQ1AsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFFRCxZQUFZO1FBQ1IsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztJQUN0QyxDQUFDOzsrR0ExQ1Esa0JBQWtCLGtCQTRCNkIsb0JBQW9CO21HQTVCbkUsa0JBQWtCOzJGQUFsQixrQkFBa0I7a0JBWDlCLFNBQVM7bUJBQUM7b0JBQ1AsUUFBUSxFQUFFLGFBQWE7b0JBQ3ZCLElBQUksRUFBRTt3QkFDRixxQkFBcUIsRUFBRSxNQUFNO3dCQUM3QixtQkFBbUIsRUFBRSxRQUFRO3dCQUM3QixxQkFBcUIsRUFBRSxVQUFVO3dCQUNqQyxxQkFBcUIsRUFBRSxRQUFRO3dCQUMvQixpQkFBaUIsRUFBRSxnQkFBZ0I7d0JBQ25DLHNCQUFzQixFQUFFLHFCQUFxQjtxQkFDaEQ7aUJBQ0o7MERBNkIyRCxvQkFBb0I7MEJBQS9ELFFBQVE7OzBCQUFJLFFBQVE7Z0dBdEI3QixNQUFNO3NCQURULEtBQUs7Z0JBYUYsUUFBUTtzQkFEWCxLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRm9jdXNNb25pdG9yIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL2ExMXknO1xuaW1wb3J0IHsgRGlyZWN0aW9uYWxpdHkgfSBmcm9tICdAYW5ndWxhci9jZGsvYmlkaSc7XG5pbXBvcnQgeyBCb29sZWFuSW5wdXQsIGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2VyY2lvbic7XG5pbXBvcnQge1xuICAgIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICAgIENoYW5nZURldGVjdG9yUmVmLFxuICAgIENvbXBvbmVudCxcbiAgICBDb250ZW50Q2hpbGRyZW4sXG4gICAgRGlyZWN0aXZlLFxuICAgIEVsZW1lbnRSZWYsXG4gICAgZm9yd2FyZFJlZixcbiAgICBJbmplY3QsXG4gICAgSW5wdXQsXG4gICAgT25EZXN0cm95LFxuICAgIE9wdGlvbmFsLFxuICAgIFF1ZXJ5TGlzdCxcbiAgICBTa2lwU2VsZixcbiAgICBWaWV3Q2hpbGQsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBOeFNjcm9sbGFibGVUYWJCYXIgfSBmcm9tICcuL3Njcm9sbGFibGUtdGFiLWJhcic7XG5pbXBvcnQgeyBOeFRhYnNBcHBlYXJhbmNlLCBUQUJfTkFWX0JBUl9ERUZBVUxUX09QVElPTlMsIFRhYk5hdkJhckRlZmF1bHRPcHRpb25zIH0gZnJvbSAnLi90YWJzLm1vZGVscyc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnbngtdGFiLW5hdi1iYXInLFxuICAgIHRlbXBsYXRlVXJsOiAndGFiLW5hdi1iYXIuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vdGFiLW5hdi1iYXIuc2NzcyddLFxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgIGhvc3Q6IHtcbiAgICAgICAgJ1tjbGFzcy5pcy1uZWdhdGl2ZV0nOiAnbmVnYXRpdmUnLFxuICAgICAgICAnW2NsYXNzLmlzLWRpc2FibGVkXSc6ICdkaXNhYmxlZCcsXG4gICAgICAgICdbY2xhc3MuaXMtZXhwZXJ0XSc6ICdhcHBlYXJhbmNlID09PSBcImV4cGVydFwiJyxcbiAgICAgICAgcm9sZTogJ25hdmlnYXRpb24nLFxuICAgICAgICAnW2NsYXNzLmF0LXN0YXJ0XSc6ICdfaXNTY3JvbGxlZFRvU3RhcnQnLFxuICAgICAgICAnW2NsYXNzLnNjcm9sbGFibGVdJzogJ3Njcm9sbGFibGUnLFxuICAgIH0sXG59KVxuZXhwb3J0IGNsYXNzIE54VGFiTmF2QmFyQ29tcG9uZW50IGV4dGVuZHMgTnhTY3JvbGxhYmxlVGFiQmFyIHtcbiAgICBAVmlld0NoaWxkKCd0YWJzTGlzdCcpIHNjcm9sbGFibGVUYWJzTGlzdCE6IEVsZW1lbnRSZWY8SFRNTEVsZW1lbnQ+O1xuICAgIEBDb250ZW50Q2hpbGRyZW4oZm9yd2FyZFJlZigoKSA9PiBOeFRhYkxpbmtEaXJlY3RpdmUpKSB0YWJCdXR0b25zITogUXVlcnlMaXN0PEhUTUxFbGVtZW50PjtcblxuICAgIHByaXZhdGUgX25lZ2F0aXZlID0gZmFsc2U7XG5cbiAgICAvKiogV2hldGhlciB0aGUgdGFiIG5hdiBiYXIgaGFzIG5lZ2F0aXZlIHN0eWxpbmcuICovXG4gICAgQElucHV0KClcbiAgICBzZXQgbmVnYXRpdmUodmFsdWU6IEJvb2xlYW5JbnB1dCkge1xuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gdGhpcy5uZWdhdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5fbmVnYXRpdmUgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX2Nkci5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBuZWdhdGl2ZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25lZ2F0aXZlO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2Rpc2FibGVkID0gZmFsc2U7XG5cbiAgICAvKiogV2hldGhlciB0aGUgdGFiIG5hdiBiYXIgaGFzIGRpc2FibGVkIHN0eWxpbmcuICovXG4gICAgQElucHV0KClcbiAgICBzZXQgZGlzYWJsZWQodmFsdWU6IEJvb2xlYW5JbnB1dCkge1xuICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSh2YWx1ZSk7XG4gICAgICAgIGlmIChuZXdWYWx1ZSAhPT0gdGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX2Nkci5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldCBkaXNhYmxlZCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xuICAgIH1cblxuICAgIHByaXZhdGUgX2FwcGVhcmFuY2UhOiBOeFRhYnNBcHBlYXJhbmNlO1xuXG4gICAgLyoqXG4gICAgICogKipFeHBlcnQgb3B0aW9uKipcbiAgICAgKlxuICAgICAqIFNldHMgdGhlIGFwcGVhcmFuY2Ugb2YgdGhlIHRhYiBuYXYgYmFyLiBEZWZhdWx0OiAnZGVmYXVsdCcuXG4gICAgICovXG4gICAgQElucHV0KClcbiAgICBzZXQgYXBwZWFyYW5jZSh2YWx1ZTogTnhUYWJzQXBwZWFyYW5jZSkge1xuICAgICAgICBpZiAodGhpcy5fYXBwZWFyYW5jZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX2FwcGVhcmFuY2UgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX2Nkci5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgYXBwZWFyYW5jZSgpOiBOeFRhYnNBcHBlYXJhbmNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGVhcmFuY2UgfHwgdGhpcy5fZGVmYXVsdE9wdGlvbnM/LmFwcGVhcmFuY2UgfHwgJ2RlZmF1bHQnO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgX2NkcjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgICAgIEBPcHRpb25hbCgpIF9kaXI6IERpcmVjdGlvbmFsaXR5IHwgbnVsbCxcbiAgICAgICAgQE9wdGlvbmFsKCkgQEluamVjdChUQUJfTkFWX0JBUl9ERUZBVUxUX09QVElPTlMpIHByaXZhdGUgX2RlZmF1bHRPcHRpb25zOiBUYWJOYXZCYXJEZWZhdWx0T3B0aW9ucyB8IG51bGwsXG4gICAgICAgIF9lbGVtZW50OiBFbGVtZW50UmVmLFxuICAgICkge1xuICAgICAgICBzdXBlcihfY2RyLCBfZGlyLCBfZWxlbWVudCk7XG4gICAgfVxufVxuXG5ARGlyZWN0aXZlKHtcbiAgICBzZWxlY3RvcjogJ1tueFRhYkxpbmtdJyxcbiAgICBob3N0OiB7XG4gICAgICAgICdbY2xhc3MubngtdGFiLWxpbmtdJzogJ3RydWUnLFxuICAgICAgICAnW2NsYXNzLmlzLWFjdGl2ZV0nOiAnYWN0aXZlJyxcbiAgICAgICAgJ1tjbGFzcy5pcy1kaXNhYmxlZF0nOiAnZGlzYWJsZWQnLFxuICAgICAgICAnW2F0dHIuYXJpYS1jdXJyZW50XSc6ICdhY3RpdmUnLFxuICAgICAgICAnW2F0dHIudGFiaW5kZXhdJzogJ19nZXRUYWJJbmRleCgpJyxcbiAgICAgICAgJ1thdHRyLmFyaWEtZGlzYWJsZWRdJzogJ2Rpc2FibGVkLnRvU3RyaW5nKCknLFxuICAgIH0sXG59KVxuZXhwb3J0IGNsYXNzIE54VGFiTGlua0RpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XG4gICAgcHJpdmF0ZSBfYWN0aXZlID0gZmFsc2U7XG4gICAgcHJpdmF0ZSBfZGlzYWJsZWQgPSBmYWxzZTtcblxuICAgIC8qKiBXaGV0aGVyIHRoZSB0YWIgbGluayBpcyBhY3RpdmUgYW5kIGhhcyB0aGUgYWN0aXZlIHN0eWxpbmcuICovXG4gICAgQElucHV0KClcbiAgICBnZXQgYWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWN0aXZlO1xuICAgIH1cbiAgICBzZXQgYWN0aXZlKHZhbHVlOiBCb29sZWFuSW5wdXQpIHtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpO1xuICAgICAgICBpZiAobmV3VmFsdWUgIT09IHRoaXMuX2FjdGl2ZSkge1xuICAgICAgICAgICAgdGhpcy5fYWN0aXZlID0gbmV3VmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogV2hldGhlciB0aGUgdGFiIGxpbmsgaXMgZGlzYWJsZWQuIERlZmF1bHQ6IGZhbHNlLiAqL1xuICAgIEBJbnB1dCgpXG4gICAgZ2V0IGRpc2FibGVkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFiTmF2QmFyPy5kaXNhYmxlZCB8fCB0aGlzLl9kaXNhYmxlZDtcbiAgICB9XG4gICAgc2V0IGRpc2FibGVkKHZhbHVlOiBCb29sZWFuSW5wdXQpIHtcbiAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpO1xuICAgICAgICBpZiAobmV3VmFsdWUgIT09IHRoaXMuX2Rpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IG5ld1ZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQFNraXBTZWxmKCkgcHJpdmF0ZSBfdGFiTmF2QmFyOiBOeFRhYk5hdkJhckNvbXBvbmVudCB8IG51bGwsIHByaXZhdGUgX2VsZW1lbnRSZWY6IEVsZW1lbnRSZWYsIHByaXZhdGUgX2ZvY3VzTW9uaXRvcjogRm9jdXNNb25pdG9yKSB7XG4gICAgICAgIGlmICghdGhpcy5fdGFiTmF2QmFyKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgVGhlIG54LXRhYi1saW5rIGVsZW1lbnQgaGFzIHRvIGJlIHdyYXBwZWQgaW4gYSBueC10YWItbmF2LWJhciB0byB3b3JrLmApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fZm9jdXNNb25pdG9yLm1vbml0b3IodGhpcy5fZWxlbWVudFJlZik7XG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX2ZvY3VzTW9uaXRvci5zdG9wTW9uaXRvcmluZyh0aGlzLl9lbGVtZW50UmVmKTtcbiAgICB9XG5cbiAgICBfZ2V0VGFiSW5kZXgoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgPyAnLTEnIDogJzAnO1xuICAgIH1cbn1cbiIsIjxueC10YWItc2Nyb2xsLWluZGljYXRvciAqbmdJZj1cInNjcm9sbGFibGVcIiBzY3JvbGxEaXJlY3Rpb249XCJzdGFydFwiIFtpc1Njcm9sbGVkVG9TdGFydF09XCJfaXNTY3JvbGxlZFRvU3RhcnRcIiAoYnV0dG9uQ2xpY2tlZCk9XCJzY3JvbGxUb1N0YXJ0KClcIj5cbjwvbngtdGFiLXNjcm9sbC1pbmRpY2F0b3I+XG48ZGl2ICN0YWJzTGlzdCBjbGFzcz1cIm54LXRhYi1uYXYtYmFyXCIgdGFiaW5kZXg9XCItMVwiPlxuICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbjwvZGl2PlxuPG54LXRhYi1zY3JvbGwtaW5kaWNhdG9yICpuZ0lmPVwic2Nyb2xsYWJsZVwiIHNjcm9sbERpcmVjdGlvbj1cImVuZFwiIFtpc1Njcm9sbGVkVG9FbmRdPVwiX2lzU2Nyb2xsZWRUb0VuZFwiIChidXR0b25DbGlja2VkKT1cInNjcm9sbFRvRW5kKClcIj5cbjwvbngtdGFiLXNjcm9sbC1pbmRpY2F0b3I+XG4iXX0=